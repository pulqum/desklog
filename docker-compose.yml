version: '3.8'

services:
  django:
    build:
      context: ./Service_System
      dockerfile: Dockerfile
    container_name: desklog-django
    restart: unless-stopped
    ports:
      - "8009:8000"  # 외부포트:내부포트 (필요시 변경)
    volumes:
      # 프로젝트 코드 (개발 시 수정 반영)
      - ./Service_System:/app
      # 데이터베이스 (영구 저장)
      - ./data/db:/app/db
      # 미디어 파일 (업로드된 이미지)
      - ./data/media:/app/media
      # 정적 파일
      - ./data/staticfiles:/app/staticfiles
      # YOLOv5 모델 접근 (읽기 전용)
      - ./Edge_System:/app/edge_system:ro
      # 데모 비디오
      - ./test:/app/test:ro
    environment:
      - DEBUG=False  # 프로덕션에서는 False
      - ALLOWED_HOSTS=*  # 실제 도메인으로 변경 필요
      - SECRET_KEY=${SECRET_KEY:-django-insecure-change-this-in-production}
    networks:
      - desklog-network

networks:
  desklog-network:
    driver: bridge



